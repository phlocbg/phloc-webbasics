/*
 * Copyright (C) 2006-2013 phloc systems
 * http://www.phloc.com
 * office[at]phloc[dot]com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _doHighlightSingleTermPT(a,d){for(var e="",b=-1,f=d.toLowerCase(),c=a.toLowerCase();0<a.length;)b=c.indexOf(f,b+1),0>b?(e+=a,a=""):a.lastIndexOf(">",b)>=a.lastIndexOf("<",b)&&(c.lastIndexOf("/script>",b)>=c.lastIndexOf("<script",b)&&c.lastIndexOf("/strong>",b)>=c.lastIndexOf("<strong",b))&&(e+=a.substring(0,b)+"<strong>"+a.substr(b,d.length)+"</strong>",a=a.substr(b+d.length),c=a.toLowerCase(),b=-1);return e}
function typeaheadHighlighterMultiplePT(a,d){for(var e in d)a=_doHighlightSingleTermPT(a,d[e]);return a}
function registerTypeaheadKeyValuePair(a,d,e,b,f){var c=[],g={};$(a).typeahead({source:function(a,b){var d=function(a){g={};c=[];$.each(a,function(a,b){c.push(b.label);g[b.label]=b.value});b(c)};$.ajax({url:e,data:{query:a},success:function(a,b,c){jqueryAjaxSuccessHandler(a,b,c,d,null)}})},updater:function(a){var b=g[a];d&&d(b);return!b?"":a},highlighter:function(a){var b=this.query.trim().split(/\s+/);return typeaheadHighlighterMultiplePT(a,b)},minLength:b||1,items:f||8})};
