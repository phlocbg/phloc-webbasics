(function(z){function h(a){var b,c,d;if(!(this instanceof h))return new h(a);if(a instanceof h)this.s=a.s,this.e=a.e,this.c=a.c.slice();else{0===a&&0>1/a?a="-0":A.test(a+="")||p(NaN);this.s="-"==a.charAt(0)?(a=a.slice(1),-1):1;-1<(b=a.indexOf("."))&&(a=a.replace(".",""));0<(c=a.search(/e/i))?(0>b&&(b=c),b+=+a.slice(c+1),a=a.substring(0,c)):0>b&&(b=a.length);for(c=0;"0"==a.charAt(c);c++);if(c==(d=a.length))this.c=[this.e=0];else{for(;"0"==a.charAt(--d););this.e=b-c-1;this.c=[];for(b=0;c<=d;this.c[b++]=
+a.charAt(c++));}}}function u(a,b,c,d){var f=a.c,e=a.e+b+1;1===c?d=5<=f[e]:2===c?d=5<f[e]||5==f[e]&&(d||0>e||null!=f[e+1]||f[e-1]&1):3===c?d=d||null!=f[e]||0>e:(d=!1,0!==c)&&p("!Big.RM!");if(1>e||!f[0])a.c=d?(a.e=-b,[1]):[a.e=0];else{f.length=e--;if(d)for(;9<++f[e];)f[e]=0,e--||(++a.e,f.unshift(1));for(e=f.length;!f[--e];f.pop());}return a}function p(a){a=Error(a);a.name="BigError";throw a;}function t(a,b,c){var d=b-(a=new h(a)).e,f=a.c;f.length>++b&&u(a,d,h.RM);for(d=f[0]?c?b:(f=a.c,a.e+d+1):d+1;f.length<
d;f.push(0));d=a.e;return 1==c||2==c&&(b<=d||d<=q)?(0>a.s&&f[0]?"-":"")+(1<f.length?(f.splice(1,0,"."),f.join("")):f[0])+(0>d?"e":"e+")+d:a.toString()}h.DP=20;h.RM=1;var q=-7,r=21,g=h.prototype,A=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,v=new h(1);g.abs=function(){var a=new h(this);a.s=1;return a};g.cmp=function(a){var b=this.c,c=(a=new h(a)).c,d=this.s,f=a.s,e=this.e,k=a.e;if(!b[0]||!c[0])return b[0]?d:c[0]?-f:0;if(d!=f)return d;a=0>d;if(e!=k)return e>k^a?1:-1;d=-1;for(f=(e=b.length)<(k=c.length)?
e:k;++d<f;)if(b[d]!=c[d])return b[d]>c[d]^a?1:-1;return e==k?0:e>k^a?1:-1};g.div=function(a){var b=this.c,c=(a=new h(a)).c,d=this.s==a.s?1:-1,f=h.DP;(f!==~~f||0>f||1E6<f)&&p("!Big.DP!");if(!b[0]||!c[0])return b[0]==c[0]&&p(NaN),c[0]||p(d/0),new h(0*d);var e,k,l,g,q=c.slice(),r=e=c.length,t=b.length,m=b.slice(0,e),n=m.length,s=new h(v),w=s.c=[],x=0,y=f+(s.e=this.e-a.e)+1;s.s=d;d=0>y?0:y;for(q.unshift(0);n++<e;m.push(0));do{for(k=0;10>k;k++){if(e!=(n=m.length))l=e>n?1:-1;else for(g=-1,l=0;++g<e;)if(c[g]!=
m[g]){l=c[g]>m[g]?1:-1;break}if(0>l){for(a=n==e?c:q;n;){if(m[--n]<a[n]){for(g=n;g&&!m[--g];m[g]=9);--m[g];m[n]+=10}m[n]-=a[n]}for(;!m[0];m.shift());}else break}w[x++]=l?k:++k;m[0]&&l?m[n]=b[r]||0:m=[b[r]]}while((r++<t||null!=m[0])&&d--);w[0]||1==x||(w.shift(),s.e--);x>y&&u(s,f,h.RM,null!=m[0]);return s};g.eq=function(a){return!this.cmp(a)};g.gt=function(a){return 0<this.cmp(a)};g.gte=function(a){return-1<this.cmp(a)};g.lt=function(a){return 0>this.cmp(a)};g.lte=function(a){return 1>this.cmp(a)};g.minus=
function(a){var b,c,d=this.s,f=(a=new h(a)).s;if(d!=f)return a.s=-f,this.plus(a);var e=this.c.slice();b=this.e;var k=a.c,g=a.e;if(!e[0]||!k[0])return k[0]?(a.s=-f,a):new h(e[0]?this:0);if(d=b-g){b=(c=0>d)?(d=-d,e):(g=b,k);b.reverse();for(f=d;f--;b.push(0));b.reverse()}else for(b=((c=e.length<k.length)?e:k).length,d=f=0;f<b;f++)if(e[f]!=k[f]){c=e[f]<k[f];break}c&&(b=e,e=k,k=b,a.s=-a.s);if(0<(f=-((b=e.length)-k.length)))for(;f--;e[b++]=0);for(f=k.length;f>d;){if(e[--f]<k[f]){for(c=f;c&&!e[--c];e[c]=
9);--e[c];e[f]+=10}e[f]-=k[f]}for(;0==e[--b];e.pop());for(;0==e[0];e.shift(),--g);e[0]||(a.s=1,e=[g=0]);return a.c=e,a.e=g,a};g.mod=function(a){a=new h(a);var b,c=this,d=c.s,f=a.s;a.c[0]||p(NaN);c.s=a.s=1;b=1==a.cmp(c);c.s=d;a.s=f;return b?new h(c):(d=h.DP,f=h.RM,h.DP=h.RM=0,c=c.div(a),h.DP=d,h.RM=f,this.minus(c.times(a)))};g.plus=function(a){var b,c=this.s;b=(a=new h(a)).s;if(c!=b)return a.s=-b,this.minus(a);b=this.e;var d=this.c,f=a.e,e=a.c;if(!d[0]||!e[0])return e[0]?a:new h(d[0]?this:0*c);if(d=
d.slice(),c=b-f){b=0<c?(f=b,e):(c=-c,d);for(b.reverse();c--;b.push(0));b.reverse()}0>d.length-e.length&&(b=e,e=d,d=b);c=e.length;for(b=0;c;b=(d[--c]=d[c]+e[c]+b)/10^0,d[c]%=10);b&&(d.unshift(b),++f);for(c=d.length;0==d[--c];d.pop());return a.c=d,a.e=f,a};g.pow=function(a){var b=0>a,c=new h(this),d=v;(a!==~~a||-1E6>a||1E6<a)&&p("!pow!");for(a=b?-a:a;;){a&1&&(d=d.times(c));a>>=1;if(!a)break;c=c.times(c)}return b?v.div(d):d};g.round=function(a,b){var c=new h(this);null==a?a=0:(a!==~~a||0>a||1E6<a)&&
p("!round!");u(c,a,null==b?h.RM:b);return c};g.sqrt=function(){var a,b,c;b=this.c;a=this.s;c=this.e;var d=new h("0.5");if(!b[0])return new h(this);0>a&&p(NaN);a=Math.sqrt(this.toString());0==a||a==1/0?(a=b.join(""),a.length+c&1||(a+="0"),b=new h(Math.sqrt(a).toString()),b.e=((c+1)/2|0)-(0>c||c&1)):b=new h(a.toString());a=b.e+(h.DP+=4);do c=b,b=d.times(c.plus(this.div(c)));while(c.c.slice(0,a).join("")!==b.c.slice(0,a).join(""));u(b,h.DP-=4,h.RM);return b};g.times=function(a){var b,c=this.c,d=(a=new h(a)).c,
f=c.length,e=d.length,g=this.e,l=a.e;a.s=this.s==a.s?1:-1;if(!c[0]||!d[0])return new h(0*a.s);a.e=g+l;f<e&&(b=c,c=d,d=b,l=f,f=e,e=l);l=f+e;for(b=[];l--;b.push(0));for(g=e-1;-1<g;g--){e=0;for(l=f+g;l>g;e=b[l]+d[g]*c[l-g-1]+e,b[l--]=e%10|0,e=e/10|0);e&&(b[l]=(b[l]+e)%10)}e&&++a.e;!b[0]&&b.shift();for(l=b.length;!b[--l];b.pop());return a.c=b,a};g.toString=g.valueOf=g.toJSON=function(){var a=this.e,b=this.c.join(""),c=b.length;if(a<=q||a>=r)b=b.charAt(0)+(1<c?"."+b.slice(1):"")+(0>a?"e":"e+")+a;else if(0>
a){for(;++a;b="0"+b);b="0."+b}else if(0<a)if(++a>c)for(a-=c;a--;b+="0");else a<c&&(b=b.slice(0,a)+"."+b.slice(a));else 1<c&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.s&&this.c[0]?"-"+b:b};g.toExponential=function(a){null==a?a=this.c.length-1:(a!==~~a||0>a||1E6<a)&&p("!toExp!");return t(this,a,1)};g.toFixed=function(a){var b,c=q,d=r;q=-(r=1/0);null==a?b=this.toString():a===~~a&&0<=a&&1E6>=a&&(b=t(this,this.e+a),0>this.s&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));q=c;r=d;b||p("!toFix!");return b};
g.toPrecision=function(a){if(null==a)return this.toString();(a!==~~a||1>a||1E6<a)&&p("!toPre!");return t(this,a-1,2)};"undefined"!==typeof module&&module.exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return h}):z.Big=h})(this);
